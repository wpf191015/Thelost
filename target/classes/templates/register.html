<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>注册</title>
<style>
 body{
	 height:100%;
	 width:100%;
	 background:#FFF;
	 }
	  #af{
		 height:850px;
		 width:1600px;
		 background-color:#036;
		 position:absolute;
		 top:5%;
		 left:8.5%;
		 }
	#login{
		 height:40%;
		 width:20%;
		 background-color:#06C;
		 position:absolute;
		 top:8%;
		 left:4%;
		}
	#register{
		 height:40%;
		 width:25%;
		 background-color:#06C;
		 position:absolute;
		 bottom:8%;
		 left:4%;
		 border-radius:6px 0px 0px 6px;
		}
	#register_table{
		height:84%;
		width:70%;
		background-color:#06C;
		 position:absolute;
		 bottom:8%;
		 left:26%;
		}
	.title{
		cursor:default;
		font-family:Verdana;
		font-size:48px;
		padding:0px;
		color:#FFF;
		position:absolute;
		top:-1%;
		left:10%;
		
		}
	.warning_te{
		 cursor:default;
		font-family:Verdana;
		font-size:24px;
		padding:0px;
		color:#F00;
		position:absolute;
		top:-30%;
		left:5%;
		}	
	.hr{
		height:5px;
		width:80%;
		position:absolute;
		top:15%;
		left:10%;
		background-color:#FFF;
		}
	.hrd{
		height:5px;
		width:80%;
		position:absolute;
		top:80%;
		left:10%;
		background-color:#FFF;
		}
		#username{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:20%;
			 left:12%;
			}
		#username_text{
			 position:absolute;
			 top:22.5%;
			 left:21%;
			}
		#password{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:31%;
			 left:12%;
			}	
		#password_text{
			 position:absolute;
			 top:33.5%;
			 left:21%;
			}
		#passwordtwo_text{
			 position:absolute;
			 top:44.5%;
			 left:21%;
			}
		#email{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:53%;
			 left:12%;
			}
		#email_text{
			 position:absolute;
			 top:55.5%;
			 left:21%;
			}
		#idcard{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:64%;
			 left:12%;
			}
		#idcard_text{
			 position:absolute;
			 top:66.5%;
			 left:21%;
			}	
			
		#age{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:20%;
			 left:54%;
			}
		#age_text{
			 position:absolute;
			 top:22.5%;
			 left:63%;
			}
		#sex{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:20%;
			 left:72%;
			}
		#sex_text{
			 position:absolute;
			 top:22.5%;
			 left:81.7%;
			}				
		#iphone{
			 font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:31%;
			 left:54%;
			}
		#iphone_text{
			 position:absolute;
			 top:33.5%;
			 left:63%;
			}
		#yanzhengma_text{
			  font-family:Verdana;
			 font-size:36px;
			 padding:0px;
			 color:#FFF;
			 position:absolute;
			 top:42.7%;
			 left:54%;
			}	
											
		.text{
			 font-family:Verdana;
			 font-size:22px;
			height:36px;
			width:280px;
			border-radius:6px;
			}
		.short_text{
			 font-family:Verdana;
			 font-size:26px;
			height:36px;
			width:70px;
			background-color:#CCC;
			border-radius:6px;
			}
		.zhong_text{
			 font-family:Verdana;
			 font-size:26px;
			height:36px;
			width:180px;
			background-color:#FFF;
			border-radius:6px;
			}		

		#zhaohui{
			 color:#FFF;
			 position:absolute;
			 top:85%;
			 left:75%;
			}
		a{
			 padding:0px 10px;
			 font-family:Verdana;
			 font-size:30px;
			 color:#FFF;
			 text-decoration:none;
			}
		.s{
			cursor:default;
			}		
		#button{
			color: #FFF;
			font-size:30px;
			font-family:"Courier New";
			height:45px;
			width:385px;
			background:#036;
			position:absolute;
			 top:69.5%;
			left:54%;
			cursor:pointer;
			}
		#btn{
			border-color:#039;
			height:40px;
			width:190px;
			color: #FFF;
			font-size:23px;
			font-family:"Courier New";
			background:#039;
			position:absolute;
			 top:47.8%;
			left:71.3%;
			}	
		#zhuce_text{
			position:absolute;
			top:10%;
			left:40%;
			}
		#warning{
			background:#06C;
			height:50px;
			width:400px;
			position:absolute;
			left:54%;
			top:10%;
			}
		#rgsjpg{
			position:relative;
			left:10px;
			}						 
</style>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script>
	$(function(){
		<!--判断用户名长度及是否重名-->
			$("#name").blur(function(){
				var name=$(this).val();
				var warning;
				if(name.length<8||name.leng>20){
					warning="*warn:用户名长度在8到20之间";
					<!--发送ajxa验证重名-->
					
					/*
						代码块
					*/
				}else{
					<!--发送ajax验证用户名是否同名-->
					}		
				$("#warning_text").text(warning);		
			});
			
		
		<!--验证密码长度-->
			$("#pass").blur(function(){
				var pass=$(this).val();
				var warning;
				if(pass.length<6||pass.leng>20){
					warning="*warn:密码长度在6到20之间";
				}
				$("#warning_text").text(warning);	
			});	
		<!--验证密码长度-->
			$("#passtwo").blur(function(){
				var pass=$("#pass").val();
				var passtwo=$(this).val();
				var warning;
				if(pass!=passtwo){
					warning="*warn:两次密码不相同！";
				}
				$("#warning_text").text(warning);	
			});		
		<!--验证邮箱-->
			$("#el").blur(function(){
				var email=$(this).val();	
				var warning;
				if(email==""){
					warning="*warn:邮箱不能为空！";
				}else if(!email.match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/)){
					warning="*warn:邮箱格式不正确！";
				}
				$("#warning_text").text(warning);		
			});
		<!--验证身份证-->
			$("#idcards").blur(function(){
				var idcard=$(this).val();	
				var warning;
				if(idcard==""){
					warning="*warn:身份证不能为空！";
				}else if(!idcard.match(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X|x)$/)){
					warning="*warn:身份证格式不正确！";
				}else{
					 var date=new Date;
 					 var year=date.getFullYear(); 
					 var month=date.getMonth()+1;
					 month =(month<10 ? "0"+month:month); 
					 var mydate = (year.toString()+month.toString());
					
					 var yeard=idcard.substring(6,10);
					 var months=idcard.substring(10,12);
					 var days=idcard.substring(12,14);
					 var sex=idcard.substring(16,17);
					 if(yeard<1900||yeard>=year){
						 warning="*warn:身份证年份不正确！";
					 }else if(months<1||months>12){
						 warning="*warn:身份证月份不正确！";
					}else if(days<1||days>31){
						 warning="*warn:身份证日期不正确！";
					}else{
						if(!(sex % 2)==0){
							$("#sexs").val("男");
						}else{
							$("#sexs").val("女");
						}
						
						var age=year-yeard;
						$("#ages").val(age);	
						}

				}
				$("#warning_text").text(warning);		
			});
		
		<!--手机验证-->
		$("#iphones").blur(function(){
			 	var iphone=$(this).val();
				var warning;
				if(iphone==""){
					warning="*warn:手机号不能为空！";
				}else{
					if(!(/^((\d{3}-\d{8}|\d{4}-\d{7,8})|(1[3|5|7|8][0-9]{9}))$/.test(iphone))){
						warning="*warn:手机号格式错误！";
					}
				}
			$("#warning_text").text(warning);		
		});
		
		
		
		
		$("#button").click(function(){
			var name= $("#name").val();
			var pass= $("#pass").val();
			var passs=$("#passtwo").val();
			var email=$("#el").val();
			var idcard=$("#idcards").val();
			var age=$("#ages").val();	
			var sex=$("#sexs").val();
			var iphone=$("#iphones").val();
			var yanzheng=$("#yanzhengs").val();
			var warn=$("#warning_text").val();
			<!--发送ajxa验证重名-->
					
					/*
						代码块
						用接收的结果判断是否重复 放入if（warn==""）{
							
							}
					*/
		if(warn==""){	
			if(name!=""&&pass!=""&&passs!=""&&email!=""&&idcard!=""&&age!=""&&sex!=""&&iphone!=""&&yanzheng!=""){
				 if(name.length>=8&&name.length<=20){
					 	if(pass==passs){
								if(pass.length>=6&&pass.length<=20){
									if(email.match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/)){
											if(idcard.match(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X|x)$/)){
												 var date=new Date;
												 var year=date.getFullYear(); 
												 var month=date.getMonth()+1;
												 month =(month<10 ? "0"+month:month); 
												 var mydate = (year.toString()+month.toString());
													
												 var yeard=idcard.substring(6,10);
												 var months=idcard.substring(10,12);
												 var days=idcard.substring(12,14);
												 var sex=idcard.substring(16,17);	
												 if(yeard>=1900&&yeard<=year){
													 if(months>0&&months<13){
														if(days>0&&days<32){
															if((/^((\d{3}-\d{8}|\d{4}-\d{7,8})|(1[3|5|7|8][0-9]{9}))$/.                                                                  test(iphone))){
																if(yanzheng!=null&&yanzheng.length==4){
															alert("恭喜你！");
															<!--再次发送ajxa实现注册-->
														}
														else{
															$("#warning_text").text("*warn:验证码格式不正确！");
														}
												}else{
													$("#warning_text").text("*warn:手机号码格式不正确！");
													}
														} else{
															$("#warning_text").text("*warn:身份证日期不正确！");
															}
													 }else{
														$("#warning_text").text("*warn:身份证月份不正确！");
														}
												 }else{
													$("#warning_text").text("*warn:身份证年份不正确！");	 
													}
											}else{
												$("#warning_text").text("*warn:身份证格式不正确！");	
												}
										}else{
											 $("#warning_text").text("*warn:邮箱格式不正确！");	
											}
									}else{
										 $("#warning_text").text("*warn:密码长度在6~20之间！");	
										}
							}else{
								 $("#warning_text").text("*warn:两次输入密码不相同！");		
								}
					 }else{
						 $("#warning_text").text("*warn:用户名长度在8~20之间！");		
						 }
				}else{
					$("#warning_text").text("*warn:表单不能有空缺项");			
					}
			}else{
				$("#warning_text").text("*warn:请不要忽略警告");
				}
		});
		$("#login").click(function(){
			window.location="login.html";
			});	
		$("input").click(function(){
			$("#warning_text").text("");
		});	
		$("#idcard").click(function(){
			$("#ages").val("");
			$("#sexs").val("");
		});	
	});
	
	
	
	
	var countdown=60; 
function settime(obj) { 
    if (countdown == 0) { 
        obj.removeAttribute("disabled");    
        obj.value="免费获取验证码"; 
        countdown = 60; 
        return;
    } else { 
        obj.setAttribute("disabled", true); 
        obj.value="重新发送(" + countdown + ")"; 
        countdown--; 
    } 
setTimeout(function() { 
    settime(obj) }
    ,1000) 
}
</script>
</head>
<body>
<div id="af">
	<div id="login"><img src="static/images/tologin.jpg" /></div>
    <div id="register"><img src="static/images/register.jpg" id="rgsjpg"/></div>
     <div id="register_table"><p id="login_text" class="title">Register...</p>
     <div id="warning"><p id="warning_text" class="warning_te"></p></div>
        <p id="login_hr" class="hr"></p>
        
        <p id="username" class="s">账号:</p>
        <p id="username_text"><input id="name" class="text" placeholder="8<=length<=20" 
        						onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        <p id="password"  class="s">密码:</p>
        <p id="password_text"><input type="password" id="pass" class="text" placeholder="6<=length<=20"
        						onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        <p id="passwordtwo_text"><input type="password" id="passtwo" class="text" placeholder="请再次输入密码!"
        							onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
  		<p id="email" class="s">邮箱:</p>
        <p id="email_text"><input type="text" id="el" class="text" placeholder="8<=length<=20"
        					 onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        <p id="idcard" class="s">证件:</p>
        <p id="idcard_text"><input type="text" id="idcards" class="text" placeholder="length=18"
        						onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        
        <p id="age" class="s">年龄:</p>
        <p id="age_text"><input type="text" id="ages" class="short_text" readonly= "true" 
        					onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        <p id="sex" class="s">性别:</p>
        <p id="sex_text"><input type="text" id="sexs" class="short_text" readonly= "true"
        					onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        <p id="iphone" class="s">手机:</p>
        <p id="iphone_text"><input type="text" id="iphones" class="text" placeholder="length=11,中国大陆"
        						onkeyup="this.value=this.value.replace(/\s+/g,'')"/></p>
        <p id="yanzhengma_text"><input type="text" id="yanzhengs" class="zhong_text"
        						onkeyup="this.value=this.value.replace(/\s+/g,'')"  /></p>
        <input type="button" id="btn" value="免费获取验证码" onclick="settime(this);" />
        
        <div id="button"><a href="#" id="zhuce_text">注册</a></div>
        <p id="login_hrd" class="hrd"></p>
        <p id="zhaohui"><a href="http://www.baidu.com" id="zz">找回密码&nbsp;→</a></p>
        </div>
   	
    </div>
</div>
</body>
</html>
